(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[800],{83471:function(e,t,r){Promise.resolve().then(r.bind(r,89637))},89637:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return L}});var l=r(57437),n=r(37440),s=r(57079),a=r(38475);let i="border-[0.0625rem] flex rounded-[0.25rem] border-border bg-countdown-bg items-center justify-center min-w-[1.25rem] h-[1.25rem]";var o=e=>{let{className:t,children:r,target:o,onEnd:d,...c}=e,[,u]=(0,s.Z)({targetDate:o,onEnd:d});return o?(0,l.jsxs)("div",{className:(0,n.cn)("flex items-center gap-1 text-xs font-bold ",t),...c,children:[r,(0,l.jsx)("div",{className:i,children:(0,a.Z)("".concat(u.hours+24*u.days),2,"0")}),":",(0,l.jsx)("div",{className:i,children:(0,a.Z)("".concat(u.minutes),2,"0")})," ",":",(0,l.jsx)("div",{className:i,children:(0,a.Z)("".concat(u.seconds),2,"0")})]}):(0,l.jsxs)("div",{className:(0,n.cn)("flex items-center gap-1 text-xs font-bold ",t),...c,children:[r,(0,l.jsx)("div",{className:i,children:"--"}),":",(0,l.jsx)("div",{className:i,children:"--"})," :",(0,l.jsx)("div",{className:i,children:"--"})]})},d=r(30687),c=r(89904),u=r(2265),m=r(80779),v=r(95317),h=r(73421),f=r(66648),g=r(10443),x=r(1779),b=r(9908),p=r(18108),w=r(86575),y=r(93009);let j=["15%","10%","6%","4%","2%","0%","0%","0%","0%","0%"],N={width:"21.25rem",height:"21.25rem",blocks:[{padding:"1.56rem",imgs:[{src:"/lottery-bg.png",width:"21.25rem",height:"21.25rem"}]}],defaultStyle:{fontWeight:600},buttons:[{radius:"3.125rem",imgs:[{src:"/go.png",width:"5.375rem",top:"-3.125rem"}]}]};function k(e){var t,r,s,a,i,o,c,k,Z,S,_,C,R,A,E,T;let{onCloseAnimation:z,isDisabled:D,refreshAssets:O,refreshLotteryInfo:F}=e,L=(0,y.Z)(),{data:M}=(0,h.Z)(b.Z8,{onError:L}),G=(0,u.useMemo)(()=>{var e;let t=null==M?void 0:null===(e=M.rewards)||void 0===e?void 0:e.map(e=>{var t;let{token:r,image_url:l,type:n}=e;return{symbol:"STAR"===n?"STAR":null==r?void 0:r.symbol,key:"STAR"===n?"star":null==r?void 0:null===(t=r.address)||void 0===t?void 0:t.toLowerCase(),type:n,imageUrl:l}});return[...(0,w.Z)(t,"key")]},[M]),I=(0,u.useRef)(),[P,U]=(0,u.useState)(!1),[q,K]=(0,u.useState)(!1),W=(0,u.useCallback)(async e=>{await (0,n._v)(2e3),I.current.stop(void 0),I.current.init(),L(e)},[I,L]),{runAsync:V,data:X}=(0,h.Z)(b.Mr,{manual:!0,onError:W}),Y=(0,u.useCallback)(async()=>{var e;U(!1),(null==X?void 0:null===(e=X.reward)||void 0===e?void 0:e.type)!=="STAR"&&(K(!0),await (0,n._v)(800),K(!1),null==z||z())},[z,X]),B=(0,u.useMemo)(()=>{let e=(null==G?void 0:G.length)||0;return null==G?void 0:G.map(t=>{let{symbol:r,imageUrl:l}=t,n=[{src:l,width:e>6?"36%":"2.625rem",top:"45%",left:""}];if(e>5&&e<16){let e=j[(null==G?void 0:G.length)-5-1];n.push({src:"/radius.png",width:"0.625rem",top:e,left:"50%"},{src:"/radius.png",width:"0.635rem",top:e,left:"-50%"})}return{fonts:[{text:r,top:"16%",fontSize:"1rem",lineClamp:1}],background:"#DFF6E4",imgs:n}})},[G]),H=(0,u.useCallback)(async()=>{var e;if(D)return;I.current.play();let t=null===(e=await V())||void 0===e?void 0:e.reward;if(null==F||F(),!t){W({message:"Uh oh! No luck this time, Thank you for participating!",variant:"default"});return}let r=(0,x.Z)(G,e=>{var r,l;return"STAR"===t.type?"STAR"===e.type:(null==e?void 0:e.key)===(null==t?void 0:null===(l=t.token)||void 0===l?void 0:null===(r=l.address)||void 0===r?void 0:r.toLowerCase())});if(-1===r){W({message:"Sorry, we encountered an error and couldn't find the prize. Please retry."});return}I.current.stop(r)},[I,D,V,F,W,G]),J=(0,u.useCallback)(e=>{(0,g.Z)(e)||(null==O||O(),U(!0))},[O]);return(0,l.jsxs)("div",{className:"relative z-10 min-h-[21.25rem] w-[21.25rem]",children:[["top-16 text-xs","right-6 top-6 text-lg","right-2 top-10 text-lg","top-6 left-2 text-xl"].map(e=>(0,l.jsx)(d.Z,{svgId:"icon-bling",className:(0,n.cn)(e,"fill-white absolute animate-pulse")},e)),1>(0,p.Z)(G)?(0,l.jsx)("div",{className:'bg-[url("/lottery-bg.png")] w-full h-[21.25rem] bg-cover flex flex-col items-center justify-center ',children:(0,l.jsx)(f.default,{src:"/empty.png",width:100,height:100,alt:"empty"})}):(0,l.jsx)(m.rD,{ref:I,...N,defaultConfig:{gutter:1===(0,p.Z)(G)?0:"0.0625rem"},onStart:H,onEnd:J,prizes:B}),(0,l.jsx)(v.yo,{open:P,onOpenChange:e=>{e?U(!0):Y()},children:(0,l.jsxs)(v.ue,{side:"bottom",children:[(0,l.jsx)(v.Tu,{children:(0,l.jsx)(v.bC,{children:"Congratulations!"})}),!!X&&(0,l.jsxs)("div",{className:"relative flex flex-col items-center justify-center h-full",children:[(0,l.jsxs)("div",{className:"relative flex flex-col items-center gap-2 w-[12rem] justify-center",children:[(0,l.jsx)(f.default,{src:"/lottery-result-bg.png",width:188,height:184,className:"absolute animate-rotate-and-scale z-0",alt:"lottery"}),(0,l.jsx)(f.default,{src:"/lottery-result-bg-icon.png",width:200,height:95,alt:"icon",className:"absolute"}),(0,l.jsx)(f.default,{src:(null==X?void 0:null===(t=X.reward)||void 0===t?void 0:t.image_url)||"",width:120,height:120,className:"animate-fade-in-and-scale z-1 relative",alt:"lottery"})]}),(0,l.jsx)("span",{className:"text-primary font-bold text-3xl pb-[1.375rem] mt-4 ",children:(null==X?void 0:null===(r=X.reward)||void 0===r?void 0:r.type)==="TOKEN"?(0,n.nx)({token:null===(s=X.reward)||void 0===s?void 0:s.amount,decimal:null===(i=X.reward)||void 0===i?void 0:null===(a=i.token)||void 0===a?void 0:a.decimals,symbol:null===(c=X.reward)||void 0===c?void 0:null===(o=c.token)||void 0===o?void 0:o.symbol}):"".concat(null===(k=X.reward)||void 0===k?void 0:k.amount," STAR")}),"You have earned\xa0",(null==X?void 0:null===(Z=X.reward)||void 0===Z?void 0:Z.type)==="TOKEN"?(0,n.nx)({token:null===(S=X.reward)||void 0===S?void 0:S.amount,decimal:null===(C=X.reward)||void 0===C?void 0:null===(_=C.token)||void 0===_?void 0:_.decimals,symbol:null===(A=X.reward)||void 0===A?void 0:null===(R=A.token)||void 0===R?void 0:R.symbol}):"".concat(null===(E=X.reward)||void 0===E?void 0:E.amount," STAR"),"\xa0 from lucky draw"]})]})}),q&&(0,l.jsx)("div",{className:"absolute inset-x-0 w-[7.5rem] m-auto z-10",children:(0,l.jsx)(f.default,{src:(null==X?void 0:null===(T=X.reward)||void 0===T?void 0:T.image_url)||"",width:80,height:80,alt:"lottery",className:"animate-fly-to-assets z-20"})})]})}var Z=r(53044),S=r(70209),_=r(68763),C=r.n(_);function R(){let[e,t]=(0,Z.Z)({list:[]}),r=(0,u.useRef)([]);return(0,u.useEffect)(()=>{(0,b.ht)().then(e=>{r.current=e,r.current.length>=2?t(e=>({list:[r.current[r.current.length-1],r.current[r.current.length-2]]})):t({list:r.current||[]})})},[]),(0,S.Z)(()=>{if(r.current.length){let e=r.current.pop();r.current.unshift(e),r.current.length>=2?t(e=>({list:[r.current[r.current.length-1],r.current[r.current.length-2]]})):t({list:r.current||[]})}},3e3),(0,l.jsx)("div",{className:["border border-1 border-[#249302] w-[21rem] rounded-full text-center h-[1.875rem] overflow-hidden",C().bgGradient].join(" "),children:e.list.map((e,t)=>(0,l.jsxs)("div",{className:"text-[0.75rem] leading-[1.875rem] animate animate-msgin",children:["\uD83C\uDF89 ",e.username," has withdrawn ",(0,l.jsx)("span",{className:"text-[#71FF45]",children:e.token})," successfully"]},"".concat(e.username,"::").concat(t)))})}var A=r(57578),E=r(99016),T=r(62737),z=r.n(T),D=r(91972),O=r(16463);let F=[{label:"My Assets",href:"/user",img:"/gift.png"},{label:"Get More Chances",href:"/quest"}];function L(){let e=(0,y.Z)(),{data:t,refreshAsync:r}=(0,h.Z)(b.UX,{onError:e}),s=(0,u.useMemo)(()=>{var e;return t&&(null===(e=(0,D.Z)(null==t?void 0:t.assets,e=>"STAR"===e.type))||void 0===e?void 0:e.amount)||0},[t]),[{count:a,target:i},m]=(0,u.useState)({count:0,target:void 0}),{data:v,refreshAsync:g,loading:x}=(0,h.Z)(b.PV,{onSuccess:e=>{m((0,n.Oe)(e))},onError:e}),[p,w]=(0,u.useState)(!1),j=(0,O.useRouter)(),N=(0,u.useRef)(null);return(0,E.Z)(()=>{var e;j.push("/test".concat((null===(e=location)||void 0===e?void 0:e.hash)||""))},N,{delay:5e3}),(0,l.jsxs)("div",{className:"flex flex-col justify-between flex-grow relative w-full items-center bg-[url('/lottery-page-bg.png')] bg-bottom bg-no-repeat bg-[length:100vw_21.75rem] bg-blend-screen",children:[(0,l.jsx)("div",{className:"my-[0.5rem]",children:(0,l.jsx)(R,{})}),(0,l.jsxs)("div",{className:"flex justify-center items-center flex-grow",ref:N,children:[(0,l.jsx)(f.default,{src:"/star.png",alt:"star",width:60,height:60}),(0,l.jsx)("div",{className:"font-black text-3xl",children:(0,A.Z)(s).toFormat()})]}),(0,l.jsxs)("div",{className:"relative flex flex-col items-center min-h-[28.125rem] w-full",children:[(0,l.jsx)("div",{className:"flex flex-col items-end gap-2 z-20 quick-entry w-full mb-[0.8rem]",children:F.map(e=>{var t;let{label:r,href:n,img:s}=e;return(0,l.jsxs)(c.Z,{href:n+((null===(t=location)||void 0===t?void 0:t.hash)||""),className:"inline-flex h-[2rem] py-[0.25rem] pl-[0.5rem] gap-[0.12rem] rounded-l-[6.25rem] text-sm border font-medium bg-tag-bg items-center",children:[s&&(0,l.jsx)(f.default,{src:s,width:24,height:24,alt:"gift",className:p?"animate-[bounce_500ms_ease-in-out_1]":""}),r," ",(0,l.jsx)(d.Z,{svgId:"icon-arrow"})]},r)})}),(0,l.jsx)(k,{onCloseAnimation:async()=>{w(!0),await (0,n._v)(1e3),w(!1)},refreshAssets:r,refreshLotteryInfo:g,isDisabled:x||!a||a<=0}),(0,l.jsxs)("div",{className:"leading-[2.5rem] relative z-10 bg-countdown-bg rounded-[6.25rem] px-6 mb-[0.625rem] font-semibold -mt-4 flex items-center",children:["Lucky Draw:\xa0",(0,l.jsxs)("div",{className:"text-primary text-lg",children:[null!=a?a:0,"/",n.p8]})]}),(0,l.jsx)(o,{className:"relative z-10 mb-1",target:i,onEnd:()=>{z()().diff(i,"seconds",!0)>1||m((0,n.Oe)(v))},children:"Recovering"}),(0,l.jsx)(f.default,{src:"/lottery-bottom.png",width:290,height:82,alt:"lottery bottom",className:"m-auto absolute bottom-0 z-0"})]})]})}},68763:function(e){e.exports={bgGradient:"LotteryWithdrawalsRandom_bgGradient__gGfL2"}}},function(e){e.O(0,[864,407,604,729,292,281,615,818,970,971,23,744],function(){return e(e.s=83471)}),_N_E=e.O()}]);